<!DOCTYPE html>
{% extends 'base.html' %}
{% block title %}Edit an Article{% endblock %}
{% block headerName %}編集する{% endblock %}
{% block content %}
<div class="edit-article-wrapper">
    <h2 class="edit-article-title">記事を編集</h2>
    <form method="POST" enctype="multipart/form-data" id="form" class="edit-article-form">
        {% csrf_token %}
        <div class="edit-article-item">
            <label for="id_title" class="edit-article-label">タイトル</label>
            {{ form.title }}
            <p class="edit-article-helptext">{{ form.title.help_text }}</p>
            {% for error in form.title.errors %}
            <span class="edit-article-error">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="edit-article-item">
            <label for="id_body" class="edit-article-label">本文</label>
            {{ form.body }}
            <p class="edit-article-helptext">{{ form.body.help_text }}</p>
            {% for error in form.body.errors %}
            <span class="edit-article-error">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="edit-article-item">
            <label for="id_thumb" class="edit-article-label">サムネイル画像</label>
            {{ form.thumb }}
            <p class="edit-article-helptext">
                {{ form.thumb.help_text }}
            </p>
            {% for error in form.thumb.errors %}
            <span class="edit-article-error">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="edit-article-item">
            <label for="id_category" class="edit-article-label">カテゴリ</label>
            {{ form.category }}
            <p class="edit-article-helptext">{{ form.category.help_text }}</p>
            {% for error in form.category.errors %}
            <span class="edit-article-error">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="edit-article-item">
            <label for="id_slug" class="edit-article-label">スラッグ（URL用）</label>
            {{ form.slug }}
            <p class="edit-article-helptext">{{ form.slug.help_text }}</p>
            {% for error in form.slug.errors %}
            <span class="edit-article-error">{{ error }}</span>
            {% endfor %}
            <small>
                <p class="edit-article-slug-note">
                    ※タイトルが日本語のみの場合は、半角英数字でスラッグを入力してください（例: "nihongo-no-kiroku"）。<br>
                    空白は自動で「-」に変換されます。
                </p>
            </small>
        </div>

        <div class="edit-article-button-panel">
            <input type="submit" class="edit-article-submit" value="更新する">
        </div>
    </form>
    <div class="form-footer">
        <div class="site-form-new">
            <div class="p_container">
                <div id="fake-upload-animation" style="display:none; text-align:center; margin: 20px 0;">
                    <div style="width: 100%; background: #eee; border-radius: 8px; overflow: hidden;">
                        <div id="fake-bar" style="width:0%; height: 24px; background: linear-gradient(90deg, #4caf50, #81c784); transition: width 0.3s;"></div>
                    </div>
                    <p id="fake-message" style="margin-top: 10px;">Uploading...please wait!</p>
                </div>
            </div>
        </div>
    <div class="edit-article-footer">
        <a href="{% url 'home' %}" class="edit-article-home-link">ホームに戻る</a>
    </div>
</div>
{% endblock %}
{% block script %}
<script src="/static/js/slugify.js"></script>
<script src="/static/js/progress.js"></script>
{% endblock %}